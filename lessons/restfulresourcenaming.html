<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>RESTful Resource Naming</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Naming Tutorial: RESTful services are resource-based. How do you create those noun-based resource names? Here's how...">
		<meta name="author" content="Todd Fredrich, Pearson eCollege">
		<!-- Le styles -->
		<link href="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.0.4/css/bootstrap-combined.min.css" rel="stylesheet">
		<style type="text/css">
			body {
				direction: rtl;
				text-align:right;
				padding-top: 60px;
				padding-bottom: 40px;
			}
            .banner-container {
            }
			.navbar .nav>li {
				display: block;
				float: right;
			}
			.navbar .nav>ul {
				display: block;
				float: right;
			}
			@font-face {
			   font-family: Sahel;
			   src: url(../static/font/Sahel.woff);
			}

			* {
			   font-family: Sahel;
			}
			.pager {
				direction: rtl;
			}
		</style>
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!-- <script type="text/javascript"> -->

		  <!-- var _gaq = _gaq || []; -->
		  <!-- _gaq.push(['_setAccount', 'UA-31328878-1']); -->
		  <!-- _gaq.push(['_trackPageview']); -->

		  <!-- (function() { -->
		    <!-- var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; -->
		    <!-- ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; -->
		    <!-- var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); -->
		  <!-- })(); -->

		<!-- </script> -->
		<!-- <!-- Facebook Pixel Code --> 
		<!-- <script> -->
		  <!-- !function(f,b,e,v,n,t,s) -->
		  <!-- {if(f.fbq)return;n=f.fbq=function(){n.callMethod? -->
		  <!-- n.callMethod.apply(n,arguments):n.queue.push(arguments)}; -->
		  <!-- if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; -->
		  <!-- n.queue=[];t=b.createElement(e);t.async=!0; -->
		  <!-- t.src=v;s=b.getElementsByTagName(e)[0]; -->
		  <!-- s.parentNode.insertBefore(t,s)}(window, document,'script', -->
		  <!-- 'https://connect.facebook.net/en_US/fbevents.js'); -->
		  <!-- fbq('init', '389059184866929'); -->
		  <!-- fbq('track', 'PageView'); -->
		<!-- </script> -->
		<!-- <noscript><img height="1" width="1" style="display:none" -->
		  <!-- src="https://www.facebook.com/tr?id=389059184866929&ev=PageView&noscript=1" -->
		<!-- /></noscript> -->
		<!-- End Facebook Pixel Code -->
	</head>
	<body>
		<div class="container">
            <div class="row">
                <div class="span12 banner-container">
					<!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
					<!-- <!-- Rest API Tutorial --> 
					<!-- <ins class="adsbygoogle" -->
						 <!-- style="display:block" -->
						 <!-- data-ad-client="ca-pub-2093481943685202" -->
						 <!-- data-ad-slot="4845828438" -->
						 <!-- data-ad-format="auto"></ins> -->
					<!-- <script> -->
					<!-- (adsbygoogle = window.adsbygoogle || []).push({}); -->
					<!-- </script> -->
                </div>
            </div>
			<div class="row">
				<div class="span4">
					<ul class="pager">
						<li>
							<a href="idempotency.html"><i class="icon-step-forward"></i>Idempotence </a>
						</li>
						<li>
							<a href="httpmethods.html"> متدهای HTTP<i class="icon-step-backward"></i></a>
						</li>
					</ul>
				</div>
				<div class="span8">
					<h1>نامگذاری منابع</h1>
				</div>
			</div>
			<div class="row">
				<div class="span12">
					<p dir="RTL">هنگام طراحی API برای وب سرویس ها علاوه بر استفاده درست از متدهای HTTP نامگذاری درست منابع یکی از مهمترین مسائل می باشد. نامگذاری مناسب منابع موجب می شود استفاده از API ها شفاف و ساده باشد. اگر درست نامگذاری نشود استفاده از آن ممکن است گیج کننده و فهمش سخت باشد. در ادامه نکاتی جهت طراحی API ها و نامگذاری URI های مربوط به منابع گفته می شود.</p>
					<p dir="RTL">API شامل مجموعه ای از URI ها، چند فراخوانی HTTP از آن URI ها و چندین پاسخ با فرمت JSON یا XML در representation آن و یا چند لینک در پاسخ خواهد بود. اصل قابلیت آدرسدهی RESTful با URI ها به انجام می رسد. هر منبع URI مربوط به خود را دارد. هر اطلاعاتی که سرور می تواند ارائه دهد را به عنوان منبع می توانیم در نظر بگیریم. محدودیت "رابط کاربری یکسان" با استفاده از URI ها همراه با متدهای HTTP و استفاده کردن از آن در چارچوب قرارداد ها استانداردها، تعریف می شود.</p>
					<p dir="RTL">برای مشخص کردن منابع سیستم باید از "اسم" به جای "فعل" استفاده کنیم. در واقع در نام گذاری URI های RESTful منابع شیء یا چیزی هستند که نام دارند نه اینکه یک فعالیت یا کاری باشد. برای تمیز دادن این دو به این فکر کنید اسامی دارای جزئیات (properties) هستند در حالی که افعال نه.</p>
					<p dir="RTL">مثال های از منابع:</p>		
					<ul>
						<li>کاربران یک سیستم</li>
						<li>کورس های درسی</li>
						<li>تایم لاین پست های یک کاربر</li>
						<li>کاربرانی که کاربران دیگر را دنبال می کنند</li>
					</ul>
					<p dir="RTL">در یک سرویس برای هر منبع حداقل یه URI وجود دارد، بهتر است که این URI به بهترین شکل این منبع را توصیف کند. یک URI باید ساختاری سلسله مراتبی و قابل پیشبینی داشته باشد چون این موضوع موجب قابل فهم بودن آن می گردد. رعایت این موارد برای این نیست که قانون یا محدودیت برای REST باشد بلکه برای خود API و کاربران آن بهتر است.</p>
					<p dir="RTL">API ها برای کابران نوشته شده اند بنابراین باید برای کاربران با معنی باشد. با شناخت دیتای موجود متوجه می شویم که بهترین دیتا برای نمایش به کلاینت چیست. API را برای کاربران طراحی کنید نه برای دیتا.</p>
					<p dir="RTL">فرض کنید می خواهیم یک سیستم سفارش گذاری طراحی کنیم که شامل مشتری ها، سفارش ها، محصولات، و لاین های آیتم های سفارش باشد.&nbsp;</p>					
				</div>
			</div>
			<div class="row">
				<div class="span12">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#examples" data-toggle="tab">مثال هایی از URI برای منابع</a></li>
						<li><a href="#antipatterns" data-toggle="tab">مثال هایی مخالف با الگو های استاندارد</a></li>
						<li><a href="#pluralization" data-toggle="tab">Pluralization</a></li>
					</ul>
					<div id="namingTabContent" class="tab-content">
						<div class="tab-pane fade in active" id="examples">
							<p dir="RTL">برای ساختن یک کاربر در سیستم:</p>
							<p><em>POST http://www.example.com/customers</em></p>
							<p dir="RTL">برای مشاهده اطلاعات کاربر با شماره کاربری 33245</p>
							<p dir="RTL"><em>GET http://www.example.com/customers/33245</em></p>
							<p dir="RTL">با استفاده از PUT و DELETE هم می توان همین کاربر را آپدیت و پاک کرد.</p>
							<p dir="RTL">URI های product:</p>
							<p><em>POST http://www.example.com/products</em>&nbsp;for creating a new product.</p>
							<p dir="ltr"><em>GET|PUT|DELETE http://www.example.com/products/66432</em></p>
							<p dir="RTL">حالا به قسمت جالب می رسیم. برای ساختن یک order برای یک customer باید از چه URI ای استفاده کرد؟ می توان از POST http://www.example.com/orders&nbsp; استفاده کرد اما همانطور که می بینید در هیچ کجای این URI ارتباطی با customers دیده نمی شود. برای برقراری چنین ارتباطی از <em>POST http://www.example.com/customers/33245/orders</em> استفاده می کنیم.</p>
							<p dir="RTL">URI زیر چه مقداری را باز می گرداند؟</p>
							<p dir="ltr"><em>GET http://www.example.com/customers/33245/orders</em></p>
							<p dir="RTL">سفارش های کاربر با شماره شناسایی 33245. با این URI از متدهای DELETE و PUT نبایستی استفاده کرد چرا که این URI مربوط به مجموعه ای از منابع است.</p>
							<p dir="RTL">URI زیر چه؟</p>
							<p dir="ltr"><em>POST http://www.example.com/customers/33245/orders/8769/lineitems</em></p>
							<p dir="RTL">یک lineitem به سفارش شماره 8769 برای کاربر 33245 ساخته می شود. با استفاده از متد GET می توان تمامی آیتم های مربوط به سفارش مورد نظر را برگرداند.</p>
							<p dir="RTL">حال یک لایه عمیق تر شویم:</p>
							<p dir="LTR"><em>GET http://www.example.com/customers/33245/orders/8769/lineitems/1</em></p>
							<p dir="RTL">لاین اول سفارش مورد نظر را نشان می دهد.</p>
							<p dir="RTL">تا اینجا دیدم که ساختار سلسله مراتبی چگونه کار می کند. قانون و دستورالعمل خاصی ندارد تنها بایستی برای کاربر با معنی به نظر برسد. مانند باقی بخش های توسعه نرم افزار نامگذاری صحیح از اهمیت بالایی برخوردار است.</p>
							<p dir="RTL">حال به مثال های واقعی از API را ببینیم:</p>
							<ul>
								<li><b>Twitter:</b> https://developer.twitter.com/en/docs/api-reference-index</li>
								<li><b>Facebook:</b> https://developers.facebook.com/docs/reference/api/</li>
								<li><b>LinkedIn:</b> https://developer.linkedin.com/apis</li>
							</ul>
						</div>

						<div class="tab-pane fade" id="antipatterns">
							<p dir="RTL">تا اینجا مثال ها و روش های صحیح نامگذاری URI را دیدیم. قطعا دیدن مثال های غلط و برخلاف الگوهای گفته شده می تواند در یادگیری موثر باشد. در ادامه مثال هایی را می بینیم که باید از آنها پرهیز کنیم.</p>
							<p dir="RTL">برخی از سرویس از یک URI برای تمامی کارکردها استفاده می شود، در همان query-string عملیات (افعال) مورد نظر تعریف می گردد. به عنوان مثال در درخواست زیر آپدیت شدن customer با شناسه 12345 با بدنه JSON به صورت زیر تعریف می شود:</p>
							<p><em>GET http://api.example.com/services?op=update_customer&amp;id=12345&amp;format=json</em></p>
							<p dir="RTL">در مثال بالا هیچ ساختار سلسله مراتبی وجود ندارد و برای تمامی افعال این URL یکسان است از طرفی این URI اطلاعات کافی به کاربر نمی دهد. مشکل بعدی این است که برای آپدیت از متد GET استفاده می شود که هم از نظر امنیتی خطرناک است هم اینکه از نظر شهودی ممکن است موجب کج فهمی کاربر شود.</p>
							<p dir="RTL">مثال زیر برای آپدیت کاربر را در نظر بگیرید:</p>
							<p><em>GET http://api.example.com/update_customer/12345</em></p>
							<p dir="RTL">و یک نمونه شیطانی دیگر:</p>
							<p><em>GET http://api.example.com/customers/12345/update</em></p>
							<p dir="RTL">مثال بالا اتفاقا بسیار مورد استفاده است. این مثال کمی بهتر است چرا که نامگذاری توسعه دهنده در راستای استاندارد RESTful است اما چه نیازی است که در URL از update برای مشخص شدن عملیات استفاده شود در حالی خود HTTP این قابلیت را به ما داده است می توانیم از PUT استفاده کینم مثل:</p>
							<p><em>PUT http://api.example.com/customers/12345/update</em></p>
							<p>&nbsp;</p>
						
						</div>
						<div class="tab-pane fade" id="pluralization">						
							<p dir="RTL">بیاید کمی در مورد pluralizer ها و singularizer ها صحبت کنیم.</p>
							<p dir="RTL">برای نام گذاری منابع باید از نام جمع یا نام مفرد استفاده کرد؟ به عنوان مثال برای نمایش یک customer از کدام URI زیر باید استفاده کرد؟</p>
							<p dir="RTL"><em>http://www.example.com/customer/33245</em></p>
							<p dir="RTL"><em>GET http://www.example.com/customers/33245</em></p>
							<p dir="RTL">هر کدام از این نامگذاری ها طرفدارانی دارد اما به صورت کلی استفاده از نام جمع (plural) پذیرفته شده است چرا که در این صورت API با تمامی متدهای HTTP همخوانی دارد، در واقع ایده این است که customer دراین سرویس یک مجموعه است که شناسه 12345 یکی از آنهاست. طبق این قانون یک URI که شامل چند منبع می شود مانند مثال زیر نوشته می شود:</p>
							<p><em>GET http://www.example.com/<strong>customers</strong>/33245/<strong>orders</strong>/8769/<strong>lineitems</strong>/1</em></p>
							<p dir="RTL">این نشان می دهد که برای تمامی عملیات های موجود ما تنها نیاز به دو URL برای هر منبع داریم. یکی برای ساختن منبع و دیگری برای آپدیت، پاک کردن و خواندن مثلا:</p>
							<p><em>POST http://www.example.com/customers</em></p>
							<p dir="RTL">و</p>
							<p><em>GET|PUT|DELETE http://www.example.com/customers/{id}</em></p>
							<p dir="RTL">قبلا هم گفته شد که ممکن است عملیات های بیشتری تعریف گردد اما برای عملیات های استاندارد CRUD دو URL کافی است.</p>
							<p dir="RTL">شاید به مثال هایی برخورد کنید که استفاده از اسم جمع معنی نداشته باشد و در واقع اصلا امکان ندارد که چند عدد از یک منبع وجود داشته باشد (singleton). برای چنین مثال ها می توان از اسامی مفرد استفاده کرد مانند:</p>
							<p><em>GET|PUT|DELETE http://www.example.com/configuration</em></p>
							<p dir="RTL">توجه کنید که فقط یک configuration وجود دارد و در واقع شناسه configuration وجود ندارد. برای ساخت یک configuration برای یک customer می توان از URL زیر استفاده کرد:</p>
							<div>
							<p><em>GET|PUT|DELETE http://www.example.com/customers/12345/configuration</em></p>
							<p>&nbsp;</p>
							<p>&nbsp;</p>
							</div>
							<p>&nbsp;</p>
						</div>
					</div>
				</div>
			</div>
			<hr>
			<footer>
				<p><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
				<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
				</a>
				<p style="text-align: justify;" dir="rtl">تحت لیسانس <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative commons</a>.</p>
			</footer>
		</div> <!-- /container -->
		
		
		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </a>
					<a class="brand" href="https://www.restapitutorial.ir" style="float:right;">راهنمای REST API</a>
					<div class="nav-collapse" style="float:right;">
						<ul class="nav">
							<li><a href="../index.html">خانه</a></li>
							<li class="dropdown active" id="api-school"><a class="dropdown-toggle" data-toggle="dropdown" href="#">آموزش ها<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="whatisrest.html">REST چیست؟</a></li>
									<li><a href="restquicktips.html">راهنمایی سریع REST</a></li>
									<li><a href="httpmethods.html">متدهای HTTP</a></li>
									<li class="active"><a href="restfulresourcenaming.html">نام گذاری منابع</a></li>
									<li><a href="idempotency.html">Idempotence</a></li>
								</ul>
							</li>
							<li><a href="../httpstatuscodes.html">کدهای وضعیت HTTP</a></li>
							<li><a href="../resources.html">منابع</a></li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		<!-- Le javascript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.0.4/js/bootstrap.min.js"></script>
		<a href="https://github.com/amirjj/RestApiTutorial.ir"><img style="position: absolute; top: 0; left: 0; border: 0; z-index: 1050; transform: rotate(-90deg);" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
	</body>
</html>
